pipeline {

    agent any

    environment {

        DOCKER_HUB_CREDENTIALS = credentials('docker-hub-credentials') // Jenkins credential ID for Docker Hub

    }

    stages {

        stage('Build') {

            steps {

                dir('Interface_up_down') {

                    sh 'ls'

                    sh 'docker build -t interface_up_down -f Dockerfile .'

                }

            }

        }

 

        stage('Pull from Docker Hub') {

            steps {

                script {

                    // Log in to Docker Hub using credentials

                    withCredentials([usernamePassword(credentialsId: 'docker-hub-credentials', usernameVariable: 'DOCKER_USERNAME', passwordVariable: 'DOCKER_PASSWORD')]) {

                        sh "docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD"

 
                        sh'docker tag interface_up_down 6302650993/ashashaik_123:interface_up_down'
                        // Pull the Docker image from Docker Hub

                        sh 'docker push 6302650993/ashashaik_123:interface_up_down'

                    }

                }

            }

        }

 

        stage('Run Docker Container') {

            steps {

                script {

                    // Run a Docker container with the pulled image

                    sh 'docker run -it interaface-up-down 6302650993/ashashaik_123:interface-up-down'

                }

            }

        }

 

        // Additional stages in your pipeline...

    }

}
