from pyats import aetest

from pyats.topology import loader

testbed = loader.load(yaml / my_testbed.yaml)

config_changes = [
    'interface GigabitEthernet0/1',
    'description New Description',
    'ip address 192.168.1.1 255.255.255.0',
    'no shutdown',
    'exit'
]

class MyTestcase(aetest.Testcase):

    @aetest.setup
    def connect_to_device(self):
        self.device = testbed.devices['Cat8000V']

        self.device.connect()

    @aetest.test
    def get_device_info(self):
        self.device.configure('\n'.join(config_changes))
        output = self.device.execute('write memory')
        self.passed(f"Device Info:\n{output}")

    @aetest.cleanup
    def disconnect_from_device(self):
        self.device.disconnect()


if __name__ == '__main__':

    aetest.main()

